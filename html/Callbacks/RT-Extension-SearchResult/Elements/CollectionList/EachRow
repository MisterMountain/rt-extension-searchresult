<%INIT>
# Otherwise admin page with queue listing breaks
RT::Logger->debug("EachRow callback, record type is $Record->RecordType");
return if $Record->RecordType ne 'Ticket';

my $status = $Record->Status;

#use Data::Dumper;
#$RT::Logger->warn(Dumper($Record->Status));
my @additionalClasses;

# specify the CSS classes, set by reference
if (RT->Config->Get('SearchResult_StatusBackgroundColor')) {
  push @additionalClasses, "status".loc($status);
}

my $config = RT->Config->Get('SearchResult_HighlightBackgroundColor');

if (defined($config->{'color'})) {
  push @additionalClasses, "row-bg-color-".$config->{'color'};
}

$$Classes = join(' ', @additionalClasses);

</%INIT>
<%ARGS>
$Record => undef
$Classes => ''
</%ARGS>
